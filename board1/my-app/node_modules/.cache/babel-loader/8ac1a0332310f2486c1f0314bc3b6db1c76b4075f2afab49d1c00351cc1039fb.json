{"ast":null,"code":"import _slicedToArray from\"C:/Users/FOR/Downloads/MainProject_final/MainProject/board1/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useNavigate,useLocation}from'react-router-dom';import{useEffect,useState,useRef}from'react';import axios from'axios';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Content(){var _location$state;var refPw=useRef();var nav=useNavigate();var _useState=useState({name:'',title:'',date:'',content:'',pw:'',uid:''}),_useState2=_slicedToArray(_useState,2),info=_useState2[0],setInfo=_useState2[1];var location=useLocation();// uid 파라미터 가져오기\nvar uid=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.uid;//로딩시 내용뿌려줌\nuseEffect(function(){getContent();},[]);var getContent=function getContent(){var data={uid:uid};axios.post('http://localhost:3001/view',data).then(function(res){if(res.data.result=='success'){setInfo({name:res.data.row[0].name,title:res.data.row[0].title,date:res.data.row[0].regdate,content:res.data.row[0].content,pw:res.data.row[0].name,hit:res.data.row[0].hit,uid:res.data.row[0].uid});}});};//수정하기,삭제하기\nvar actionData=function actionData(type){var data={uid:info.uid,pw:refPw.current.value};if(type==='edit'){axios.post('http://localhost:3001/delete',data).then(function(res){if(res.data.result=='성공'){nav('/write',{state:{uid:info.uid}});}else{alert('비밀번호가 틀렸습니다.');}});}else if(type==='del'){if(window.confirm('삭제하시겠습니까?')){axios.post('http://localhost:3001/delete',data).then(function(res){if(res.data.result=='성공'){alert('삭제성공!');nav('/');}else{alert('비밀번호가 틀렸습니다.');}});}}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{className:\"notice\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-title\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uAE00\\uB0B4\\uC6A9\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gallview_head clear ub-content\",children:[/*#__PURE__*/_jsxs(\"h3\",{class:\"title ub-word\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"title_subject\",children:info.title}),/*#__PURE__*/_jsx(\"span\",{class:\"title_device\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"gall_writer ub-writer\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"fl\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"nickname\",children:/*#__PURE__*/_jsx(\"em\",{children:info.name})}),/*#__PURE__*/_jsx(\"span\",{class:\"gall_date\",children:info.date})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"fr\",children:[/*#__PURE__*/_jsxs(\"span\",{class:\"gall_count\",children:[\"\\uC870\\uD68C \",info.hit]}),/*#__PURE__*/_jsx(\"span\",{class:\"gall_reply_num\",children:\"\\uCD94\\uCC9C 0\"}),/*#__PURE__*/_jsx(\"span\",{class:\"gall_comment\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#focus_cmt\",children:\"\\uB313\\uAE00 0\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gallview_contents\",children:[info.content,/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{class:\"gall_pw\",children:[\"\\uBE44\\uBC00\\uBC88\\uD638 \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pw\",ref:refPw})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"foot_area\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"button\",className:\"btn btn-dark reg\",onClick:function onClick(){return actionData('edit');},value:\"\\uC218\\uC815\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",className:\"btn btn-dark reg\",onClick:function onClick(){return actionData('del');},value:\"\\uC0AD\\uC81C\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",onClick:function onClick(){return nav(-1);},className:\"btn btn-dark back\",value:\"\\uB4A4\\uB85C\\uAC00\\uAE30\"})]})]})]})});}export default Content;","map":{"version":3,"names":["React","useNavigate","useLocation","useEffect","useState","useRef","axios","Content","refPw","nav","name","title","date","content","pw","uid","info","setInfo","location","state","getContent","data","post","then","res","result","row","regdate","hit","actionData","type","current","value","alert","window","confirm"],"sources":["C:/Users/FOR/Downloads/MainProject_final/MainProject/board1/my-app/src/components/Content.js"],"sourcesContent":["import React from 'react'\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { useEffect, useState ,useRef} from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Content() {\r\n    const refPw = useRef()\r\n    const nav = useNavigate();\r\n    const [info, setInfo] = useState({\r\n        name: '',\r\n        title: '',\r\n        date: '',\r\n        content: '',\r\n        pw: '',\r\n        uid:''\r\n    });\r\n    const location = useLocation();  // uid 파라미터 가져오기\r\n    const uid = location.state?.uid;\r\n\r\n    //로딩시 내용뿌려줌\r\n    useEffect(() => {\r\n        getContent()\r\n    }, [])\r\n\r\n    const getContent = () => {\r\n\r\n        const data = {\r\n            uid: uid\r\n        }\r\n        axios.post('http://localhost:3001/view', data).then((res) => {\r\n            if (res.data.result == 'success') {\r\n                setInfo({\r\n                    name: res.data.row[0].name,\r\n                    title: res.data.row[0].title,\r\n                    date: res.data.row[0].regdate,\r\n                    content: res.data.row[0].content,\r\n                    pw: res.data.row[0].name,\r\n                    hit: res.data.row[0].hit,\r\n                    uid: res.data.row[0].uid\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n    //수정하기,삭제하기\r\n    const actionData = (type) => {\r\n        const data = {\r\n            uid: info.uid,\r\n            pw: refPw.current.value\r\n        }\r\n\r\n        if (type === 'edit') {\r\n\r\n            axios.post('http://localhost:3001/delete', data).then((res) => {\r\n                if (res.data.result == '성공') {\r\n                    nav('/write', {\r\n                        state: {\r\n                            uid: info.uid\r\n                        }\r\n                    })\r\n                } else {\r\n                    alert('비밀번호가 틀렸습니다.')\r\n                }\r\n            });\r\n\r\n\r\n        } else if (type === 'del') {\r\n            if (window.confirm('삭제하시겠습니까?')) {\r\n\r\n                axios.post('http://localhost:3001/delete', data).then((res) => {\r\n                    if (res.data.result == '성공') {\r\n                        alert('삭제성공!')\r\n                        nav('/')\r\n                    } else {\r\n                        alert('비밀번호가 틀렸습니다.')\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <section className=\"notice\">\r\n                <div className=\"page-title\">\r\n                    <div className=\"container\">\r\n                        <h3>글내용</h3>\r\n                    </div>\r\n                </div>\r\n                <div className=\"container\">\r\n                    <div className='gallview_head clear ub-content'>\r\n                        <h3 class=\"title ub-word\">\r\n                            <span class=\"title_subject\">{info.title}</span><span class=\"title_device\"></span>\r\n                        </h3>\r\n                        <div class=\"gall_writer ub-writer\" >\r\n                            <div class=\"fl\">\r\n                                <span class=\"nickname\" ><em>{info.name}</em></span>\r\n                                <span class=\"gall_date\" >{info.date}</span>\r\n                            </div>\r\n                            <div class=\"fr\">\r\n                                <span class=\"gall_count\">조회 {info.hit}</span>\r\n                                <span class=\"gall_reply_num\">추천 0</span>\r\n                                <span class=\"gall_comment\"><a href=\"#focus_cmt\">댓글 0</a></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='gallview_contents'>\r\n                        {info.content}\r\n        \r\n                        <div>\r\n                        <br/>\r\n                            <span class=\"gall_pw\">비밀번호 <input type='password' name='pw' ref={refPw}/></span>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"foot_area\">\r\n                        <input type=\"button\" className=\"btn btn-dark reg\" onClick={() => actionData('edit')} value=\"수정하기\" />\r\n                        <input type=\"button\" className=\"btn btn-dark reg\" onClick={() => actionData('del')} value=\"삭제하기\" />\r\n                        <input type=\"button\" onClick={() => nav(-1)} className=\"btn btn-dark back\" value=\"뒤로가기\" />\r\n                    </div>\r\n\r\n                </div >\r\n            </section >\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Content;"],"mappings":"wJAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,OAASC,SAAS,CAAEC,QAAQ,CAAEC,MAAM,KAAO,OAAO,CAClD,MAAOC,MAAK,KAAM,OAAO,CAAC,6IAE1B,QAASC,QAAO,EAAG,qBACf,GAAMC,MAAK,CAAGH,MAAM,EAAE,CACtB,GAAMI,IAAG,CAAGR,WAAW,EAAE,CACzB,cAAwBG,QAAQ,CAAC,CAC7BM,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EAAE,CACTC,IAAI,CAAE,EAAE,CACRC,OAAO,CAAE,EAAE,CACXC,EAAE,CAAE,EAAE,CACNC,GAAG,CAAC,EACR,CAAC,CAAC,wCAPKC,IAAI,eAAEC,OAAO,eAQpB,GAAMC,SAAQ,CAAGhB,WAAW,EAAE,CAAG;AACjC,GAAMa,IAAG,kBAAGG,QAAQ,CAACC,KAAK,0CAAd,gBAAgBJ,GAAG,CAE/B;AACAZ,SAAS,CAAC,UAAM,CACZiB,UAAU,EAAE,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMA,WAAU,CAAG,QAAbA,WAAU,EAAS,CAErB,GAAMC,KAAI,CAAG,CACTN,GAAG,CAAEA,GACT,CAAC,CACDT,KAAK,CAACgB,IAAI,CAAC,4BAA4B,CAAED,IAAI,CAAC,CAACE,IAAI,CAAC,SAACC,GAAG,CAAK,CACzD,GAAIA,GAAG,CAACH,IAAI,CAACI,MAAM,EAAI,SAAS,CAAE,CAC9BR,OAAO,CAAC,CACJP,IAAI,CAAEc,GAAG,CAACH,IAAI,CAACK,GAAG,CAAC,CAAC,CAAC,CAAChB,IAAI,CAC1BC,KAAK,CAAEa,GAAG,CAACH,IAAI,CAACK,GAAG,CAAC,CAAC,CAAC,CAACf,KAAK,CAC5BC,IAAI,CAAEY,GAAG,CAACH,IAAI,CAACK,GAAG,CAAC,CAAC,CAAC,CAACC,OAAO,CAC7Bd,OAAO,CAAEW,GAAG,CAACH,IAAI,CAACK,GAAG,CAAC,CAAC,CAAC,CAACb,OAAO,CAChCC,EAAE,CAAEU,GAAG,CAACH,IAAI,CAACK,GAAG,CAAC,CAAC,CAAC,CAAChB,IAAI,CACxBkB,GAAG,CAAEJ,GAAG,CAACH,IAAI,CAACK,GAAG,CAAC,CAAC,CAAC,CAACE,GAAG,CACxBb,GAAG,CAAES,GAAG,CAACH,IAAI,CAACK,GAAG,CAAC,CAAC,CAAC,CAACX,GACzB,CAAC,CAAC,CACN,CACJ,CAAC,CAAC,CACN,CAAC,CAED;AACA,GAAMc,WAAU,CAAG,QAAbA,WAAU,CAAIC,IAAI,CAAK,CACzB,GAAMT,KAAI,CAAG,CACTN,GAAG,CAAEC,IAAI,CAACD,GAAG,CACbD,EAAE,CAAEN,KAAK,CAACuB,OAAO,CAACC,KACtB,CAAC,CAED,GAAIF,IAAI,GAAK,MAAM,CAAE,CAEjBxB,KAAK,CAACgB,IAAI,CAAC,8BAA8B,CAAED,IAAI,CAAC,CAACE,IAAI,CAAC,SAACC,GAAG,CAAK,CAC3D,GAAIA,GAAG,CAACH,IAAI,CAACI,MAAM,EAAI,IAAI,CAAE,CACzBhB,GAAG,CAAC,QAAQ,CAAE,CACVU,KAAK,CAAE,CACHJ,GAAG,CAAEC,IAAI,CAACD,GACd,CACJ,CAAC,CAAC,CACN,CAAC,IAAM,CACHkB,KAAK,CAAC,cAAc,CAAC,CACzB,CACJ,CAAC,CAAC,CAGN,CAAC,IAAM,IAAIH,IAAI,GAAK,KAAK,CAAE,CACvB,GAAII,MAAM,CAACC,OAAO,CAAC,WAAW,CAAC,CAAE,CAE7B7B,KAAK,CAACgB,IAAI,CAAC,8BAA8B,CAAED,IAAI,CAAC,CAACE,IAAI,CAAC,SAACC,GAAG,CAAK,CAC3D,GAAIA,GAAG,CAACH,IAAI,CAACI,MAAM,EAAI,IAAI,CAAE,CACzBQ,KAAK,CAAC,OAAO,CAAC,CACdxB,GAAG,CAAC,GAAG,CAAC,CACZ,CAAC,IAAM,CACHwB,KAAK,CAAC,cAAc,CAAC,CACzB,CACJ,CAAC,CAAC,CACN,CACJ,CAGJ,CAAC,CAED,mBACI,sCACI,iBAAS,SAAS,CAAC,QAAQ,wBACvB,YAAK,SAAS,CAAC,YAAY,uBACvB,YAAK,SAAS,CAAC,WAAW,uBACtB,oBAAI,oBAAG,EAAK,EACV,EACJ,cACN,aAAK,SAAS,CAAC,WAAW,wBACtB,aAAK,SAAS,CAAC,gCAAgC,wBAC3C,YAAI,KAAK,CAAC,eAAe,wBACrB,aAAM,KAAK,CAAC,eAAe,UAAEjB,IAAI,CAACL,KAAK,EAAQ,2BAAM,KAAK,CAAC,cAAc,EAAQ,GAChF,cACL,aAAK,KAAK,CAAC,uBAAuB,wBAC9B,aAAK,KAAK,CAAC,IAAI,wBACX,aAAM,KAAK,CAAC,UAAU,uBAAE,oBAAKK,IAAI,CAACN,IAAI,EAAM,EAAO,cACnD,aAAM,KAAK,CAAC,WAAW,UAAGM,IAAI,CAACJ,IAAI,EAAQ,GACzC,cACN,aAAK,KAAK,CAAC,IAAI,wBACX,cAAM,KAAK,CAAC,YAAY,WAAC,eAAG,CAACI,IAAI,CAACY,GAAG,GAAQ,cAC7C,aAAM,KAAK,CAAC,gBAAgB,UAAC,gBAAI,EAAO,cACxC,aAAM,KAAK,CAAC,cAAc,uBAAC,UAAG,IAAI,CAAC,YAAY,UAAC,gBAAI,EAAI,EAAO,GAC7D,GACJ,GACJ,cACN,aAAK,SAAS,CAAC,mBAAmB,WAC7BZ,IAAI,CAACH,OAAO,cAEb,oCACA,aAAK,cACD,cAAM,KAAK,CAAC,SAAS,WAAC,2BAAK,4BAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAEL,KAAM,EAAE,GAAO,GAC9E,GAEJ,cACN,aAAK,SAAS,CAAC,WAAW,wBACtB,cAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,kBAAkB,CAAC,OAAO,CAAE,yBAAMqB,WAAU,CAAC,MAAM,CAAC,EAAC,CAAC,KAAK,CAAC,0BAAM,EAAG,cACpG,cAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,kBAAkB,CAAC,OAAO,CAAE,yBAAMA,WAAU,CAAC,KAAK,CAAC,EAAC,CAAC,KAAK,CAAC,0BAAM,EAAG,cACnG,cAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAE,yBAAMpB,IAAG,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,SAAS,CAAC,mBAAmB,CAAC,KAAK,CAAC,0BAAM,EAAG,GACxF,GAEH,GACA,EACZ,CAEX,CAEA,cAAeF,QAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}