{"ast":null,"code":"import _slicedToArray from\"C:/Users/FOR/Downloads/MainProject_final/MainProject/board1/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,useNavigate}from\"react-router-dom\";import React from'react';import{useRef,useState,useEffect}from'react';import axios from'axios';import Pagination from\"./Pagination \";import{useDispatch,useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BoardList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),boardList=_useState2[0],setBoardList=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),skip=_useState4[0],setSkip=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(5),_useState8=_slicedToArray(_useState7,2),limit=_useState8[0],setLimit=_useState8[1];var refSearch=useRef();var dispatch=useDispatch();//로딩시 리스트를뿌려줌\nuseEffect(function(){getList();},[]);//페이지 전환\nvar handlePageChange=function handlePageChange(page){setCurrentPage(page);setSkip((page-1)*limit);var body={skip:(page-1)*limit,limit:limit};getList(body);setCurrentPage(page);};var _useState9=useState(/*#__PURE__*/_jsx(Pagination,{limit:limit,currentPage:currentPage,onPageChange:handlePageChange})),_useState10=_slicedToArray(_useState9,2),pagesing=_useState10[0],setPagesing=_useState10[1];//노드랑 DB 게시판을 가져오기위한 데이터 통신\nvar getList=function getList(body){var data={limit:body?body.limit:limit,currentPage:body?body.skip:skip,search:refSearch.current.value};axios.post('/list',data).then(function(res){if(res.data.result=='success'){arrBoardList(res.data.row,data);}});};//가져온 row 데이터를 가공해서 담아줌\nvar arrBoardList=function arrBoardList(data,page){var cnt=page.currentPage+1;var device=data.map(function(val,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:cnt++}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/content\",state:{uid:val.uid},children:[val.title,\" \"]})}),/*#__PURE__*/_jsx(\"td\",{children:val.name}),/*#__PURE__*/_jsx(\"td\",{children:val.regdate}),/*#__PURE__*/_jsx(\"td\",{children:val.hit})]})});});setBoardList(device);};//검색하기\nvar searchSubmit=function searchSubmit(e){e.preventDefault();getList('');dispatch({type:'search',search:refSearch.current.value});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{className:\"notice\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-title\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC775\\uBA85 \\uAC8C\\uC2DC\\uD310\"})})}),/*#__PURE__*/_jsx(\"div\",{id:\"board-search\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"search-window\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",className:\"search_form\",onSubmit:searchSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-wrap\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"search\",className:\"blind\",children:\"\\uACF5\\uC9C0\\uC0AC\\uD56D \\uB0B4\\uC6A9 \\uAC80\\uC0C9\"}),/*#__PURE__*/_jsx(\"input\",{id:\"search\",type:\"text\",name:\"search\",size:\"30\",ref:refSearch,placeholder:\"\\uAC80\\uC0C9\\uC5B4\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark\",children:\"\\uAC80\\uC0C9\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/write\",className:\"btn btn-dark write\",children:\"\\uAE00\\uC4F0\\uAE30\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{id:\"board-list\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"board-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"th-num\",children:\"\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"th-title\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"th-name\",children:\"\\uC791\\uC131\\uC790\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"th-date\",children:\"\\uB4F1\\uB85D\\uC77C\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"th-hit\",children:\"\\uC870\\uD68C\\uC218\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:boardList})]})})}),/*#__PURE__*/_jsx(\"div\",{id:\"divPaging\",children:/*#__PURE__*/_jsx(Pagination,{limit:limit,currentPage:currentPage,onPageChange:handlePageChange})})]})});}export default BoardList;","map":{"version":3,"names":["Link","useNavigate","React","useRef","useState","useEffect","axios","Pagination","useDispatch","useSelector","BoardList","boardList","setBoardList","skip","setSkip","currentPage","setCurrentPage","limit","setLimit","refSearch","dispatch","getList","handlePageChange","page","body","pagesing","setPagesing","data","search","current","value","post","then","res","result","arrBoardList","row","cnt","device","map","val","index","uid","title","name","regdate","hit","searchSubmit","e","preventDefault","type"],"sources":["C:/Users/FOR/Downloads/MainProject_final/MainProject/board1/my-app/src/components/BoardList.js"],"sourcesContent":["import { Link, useNavigate } from \"react-router-dom\";\r\nimport React from 'react'\r\nimport { useRef, useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Pagination from \"./Pagination \";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nfunction BoardList() {\r\n\r\n    const [boardList, setBoardList] = useState([]);\r\n    const [skip, setSkip] = useState(0);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [limit, setLimit] = useState(5);\r\n    const refSearch = useRef();\r\n    const dispatch = useDispatch();\r\n\r\n    //로딩시 리스트를뿌려줌\r\n    useEffect(() => {\r\n        getList()\r\n    }, [])\r\n\r\n    //페이지 전환\r\n    const handlePageChange = (page) => {\r\n        setCurrentPage(page);\r\n        setSkip((page - 1) * limit);\r\n        const body = {\r\n            skip: (page - 1) * limit,\r\n            limit: limit\r\n        }\r\n        getList(body);\r\n        setCurrentPage(page)\r\n    }\r\n    const [pagesing, setPagesing] = useState(<Pagination limit={limit} currentPage={currentPage} onPageChange={handlePageChange} />);\r\n\r\n    //노드랑 DB 게시판을 가져오기위한 데이터 통신\r\n    const getList = (body) => {\r\n\r\n        const data = {\r\n            limit: body ? body.limit : limit,\r\n            currentPage: body ? body.skip : skip,\r\n            search: refSearch.current.value\r\n        }\r\n        axios.post('/list', data).then((res) => {\r\n            if (res.data.result == 'success') {\r\n                arrBoardList(res.data.row, data);\r\n            }\r\n        });\r\n\r\n        \r\n    }\r\n\r\n    //가져온 row 데이터를 가공해서 담아줌\r\n    const arrBoardList = (data, page) => {\r\n        let cnt = page.currentPage + 1;\r\n        let device = data.map((val, index) => {\r\n            return (\r\n                <>\r\n                    <tr>\r\n                        <td>{cnt++}</td>\r\n                        <th>\r\n                            <Link to={\"/content\"} state={{ uid: val.uid }}>{val.title} </Link>\r\n                        </th>\r\n                        <td>{val.name}</td>\r\n                        <td>{val.regdate}</td>\r\n                        <td>{val.hit}</td>\r\n                    </tr>\r\n                </>\r\n            )\r\n        })\r\n\r\n        setBoardList(device);\r\n    }\r\n\r\n    //검색하기\r\n    const searchSubmit = (e) => {\r\n        e.preventDefault();\r\n        getList('');\r\n        dispatch({ type: 'search', search: refSearch.current.value });\r\n    \r\n    }\r\n\r\n    return (\r\n        <>\r\n            <section className=\"notice\">\r\n                <div className=\"page-title\">\r\n                    <div className=\"container\">\r\n                        <h3>익명 게시판</h3>\r\n                    </div>\r\n                </div>\r\n\r\n                <div id=\"board-search\">\r\n                    <div className=\"container\">\r\n                        <div className=\"search-window\">\r\n                            <form action=\"\" className='search_form' onSubmit={searchSubmit}>\r\n                                <div className=\"search-wrap\">\r\n                                    <label for=\"search\" className=\"blind\">공지사항 내용 검색</label>\r\n                                    <input  id=\"search\"  type=\"text\" name=\"search\" size=\"30\" ref={refSearch} placeholder=\"검색어를 입력해주세요.\" />\r\n                                    <button type=\"submit\" className=\"btn btn-dark\">검색</button>\r\n                                </div>\r\n                                <Link to='/write' className=\"btn btn-dark write\">글쓰기</Link >\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div id=\"board-list\">\r\n                    <div className=\"container\">\r\n                        <table className=\"board-table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th scope=\"col\" className=\"th-num\">번호</th>\r\n                                    <th scope=\"col\" className=\"th-title\">제목</th>\r\n                                    <th scope=\"col\" className=\"th-name\">작성자</th>\r\n                                    <th scope=\"col\" className=\"th-date\">등록일</th>\r\n                                    <th scope=\"col\" className=\"th-hit\">조회수</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {boardList}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                <div id=\"divPaging\">\r\n                   <Pagination limit={limit} currentPage={currentPage} onPageChange={handlePageChange} />\r\n                </div>\r\n\r\n            </section>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BoardList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}